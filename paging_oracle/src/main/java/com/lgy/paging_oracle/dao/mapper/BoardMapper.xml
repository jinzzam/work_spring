<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lgy.paging_oracle.dao.BoardDAO">
    
    <select id="list" resultType="com.lgy.paging_oracle.dto.BoardDTO">
        select boardNo, boardName, boardTitle, boardContent, boardDate, boardHit from tbl_board
    </select>

    <select id="listWithPaging" resultType="com.lgy.paging_oracle.dto.BoardDTO">

    	<![CDATA[
			SELECT
			    rn,
			    boardno,
			    boardname,
			    boardtitle,
			    boardcontent,
			    boarddate,
			    boardhit
			FROM (
			    SELECT
			        ROWNUM rn,
			        boardno,
			        boardname,
			        boardtitle,
			        boardcontent,
			        boarddate,
			        boardhit
			    FROM (
			        SELECT
			            boardno,
			            boardname,
			            boardtitle,
			            boardcontent,
			            boarddate,
			            boardhit
			        FROM tbl_board
			        ORDER BY boardno DESC
			    )
			    WHERE ROWNUM <= (#{pageNum} * #{amount})
			)
			WHERE rn > (#{pageNum}-1) * #{amount}
    	]]>
    </select>
    
    <insert id="write">
    	insert into tbl_board(boardName, boardTitle, boardContent) values(#{boardName},#{boardTitle},#{boardContent})
    </insert>
 
    <select id="contentView" resultType="com.lgy.paging_oracle.dto.BoardDTO">
        select boardNo, boardName, boardTitle, boardContent, boardDate, boardHit from tbl_board where boardNo=#{boardNo}
    </select>

    <update id="modify">
    	update tbl_board set boardName=#{boardName}, boardTitle=#{boardTitle}
    					   , boardContent=#{boardContent} where boardNo=#{boardNo}
    </update>

    <delete id="delete">
		delete from tbl_board where boardNo=#{boardNo}
    </delete>
    
    <select id="getTotalCount" resultType="int">
		select count(*) from tbl_board
    </select>
</mapper>